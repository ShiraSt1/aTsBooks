"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[274],{9274:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(5043),n=a(8055),l=a(9722),i=a(1045),o=a(3003),r=a(2545),c=a(4376),d=a(3740),u=a(3488),p=a(828),g=a(579);const h=()=>{const[e,s]=(0,t.useState)(""),[a,h]=(0,t.useState)(""),[m,w]=(0,t.useState)(""),[x,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[f,N]=(0,t.useState)(""),[y,k]=(0,t.useState)(""),[P,S]=(0,t.useState)(""),C=(0,o.wA)(),{token:F}=(0,o.d4)((e=>e.token)),[A,Y]=(0,t.useState)(!1),[E,I]=(0,t.useState)(""),[L,R]=(0,t.useState)(!1),T=(0,i.Zp)(),V=(0,u.z)().API_URL,_=(0,t.useRef)(null),q=e=>{e?e.length<6?S("Password must be at least 6 characters long."):/[A-Z]/.test(e)?/[a-z]/.test(e)?/[0-9]/.test(e)?S(""):S("Password must contain at least one digit."):S("Password must contain at least one lowercase letter."):S("Password must contain at least one uppercase letter."):S("Password is required.")};return(0,g.jsxs)("div",{className:"login-page-container",children:[(0,g.jsx)(p.y,{ref:_}),L&&(0,g.jsxs)("div",{className:"loading-container",children:[(0,g.jsx)(d.p,{style:{width:"30px",height:"30px"}}),(0,g.jsx)("p",{children:"Your request is being processed..."})]}),(0,g.jsx)("h2",{className:"login-title",children:"Log in to ATS-books"}),x?A?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"verification-code",className:"login-label",children:"Verification Code"}),(0,g.jsx)(n.S,{id:"verification-code",value:E,onChange:e=>I(e.target.value),type:"text",className:"login-input"})]}),(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"new-password",className:"login-label",children:"New Password"}),(0,g.jsx)(r._,{inputId:"new-password",value:v,onChange:e=>b(e.target.value),toggleMask:!0,feedback:!1,className:"login-input"})]}),(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"confirm-password",className:"login-label",children:"Confirm Password"}),(0,g.jsx)(r._,{inputId:"confirm-password",value:f,onChange:e=>N(e.target.value),toggleMask:!0,feedback:!1,className:"login-input"})]}),(0,g.jsx)("button",{onClick:async()=>{if(q(v),v===f)try{const s=await l.A.post("".concat(V,"api/user/reset-password-with-code"),{email:e,verificationCode:E,newPassword:v});s&&200===s.status&&(C((0,c.WG)({token:s.data.accessToken,user:s.data.user})),T("/"),k("Password has been reset successfully. You can now log in."),j(!1),Y(!1))}catch(s){w("Failed to reset password. Please check the verification code and try again.")}else w("Passwords do not match.")},className:"login-button",children:"Reset Password"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,g.jsx)(n.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,g.jsx)("button",{onClick:async()=>{try{const s=await l.A.post("".concat(V,"api/user/send-verification-code"),{email:e});s&&200===s.status&&(_.current.show({severity:"info",detail:"A verification code will be sent to your email.",life:3e3}),Y(!0),k("Verification code has been sent to your email."))}catch(s){w("Failed to send verification code. Please try again.")}},className:"login-button",children:"Send Verification Code"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,g.jsx)(n.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,g.jsxs)("div",{className:"login-input-wrapper",children:[(0,g.jsx)("label",{htmlFor:"password",className:"login-label",children:"Password"}),(0,g.jsx)(n.S,{id:"password",value:a,onChange:e=>h(e.target.value),type:"password",className:"login-input"})]}),(0,g.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),j(!0)},className:"btn-secondary forgot-password-link",children:"Forgot Password?"}),(0,g.jsx)("button",{onClick:async()=>{if(R(!0),e&&a)try{const s=await l.A.post("".concat(V,"api/user/login"),{email:e,password:a});s&&200===s.status&&(C((0,c.WG)({token:s.data.accessToken,user:s.data.user})),T("/"))}catch(s){s.response&&401===s.response.status?w("Email does not have an acount."):s.response&&402===s.response.status?w("Your password is not correct."):s.response&&403===s.response.status?w("Your account has not been confirmed yet."):w("An error occurred, please try again.")}finally{R(!1)}else w("Please fill in both email and password.")},className:"login-button",children:"Login"})]}),m&&(0,g.jsx)("div",{className:"error-message",children:m}),y&&(0,g.jsx)("div",{className:"success-message",children:y})]})}}}]);
//# sourceMappingURL=274.d4f780a4.chunk.js.map