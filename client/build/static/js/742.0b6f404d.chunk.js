"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[742],{8742:(e,t,o)=>{o.r(t),o.d(t,{default:()=>c});var i=o(4315),r=o(5043),s=o(3003),n=o(9722),d=o(579);const c=()=>{const{fileId:e}=(0,i.g)(),[t,o]=(0,r.useState)(""),[c,a]=(0,r.useState)(""),[l,p]=(0,r.useState)(!0),{token:u}=(0,s.d4)((e=>e.token)),{user:h}=(0,s.d4)((e=>e.token));(0,r.useEffect)((()=>{e&&f()}),[e]);const f=async()=>{try{const t=await n.A.get("".concat("http://localhost:3001/","api/file/view/").concat(e),{headers:{Authorization:"Bearer ".concat(u)},responseType:"blob"}),i=URL.createObjectURL(t.data);o(i),p(!1);const r=e.split(".").pop().toLowerCase();["mp4","webm"].includes(r)?a("video"):["mp3","wav","ogg"].includes(r)?a("audio"):["jpg","jpeg","png","gif","bmp","svg"].includes(r)?a("image"):["pdf"].includes(r)?a("pdf"):["txt","doc","docx"].includes(r)?a("document"):a("iframe")}catch(t){console.error("Error in loading file",t),alert("Error in loading file"),p(!1)}};return(0,d.jsx)("div",{style:{padding:"2rem",display:"flex",justifyContent:"center"},children:(0,d.jsxs)("div",{style:{border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.05)",width:"100%",maxWidth:"1000px",height:"80vh",overflow:"hidden",backgroundColor:"#f9f9f9",position:"relative"},children:[l&&(0,d.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#f9f9f9",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:"Loading file..."}),(()=>{switch(c){case"video":return(0,d.jsxs)("video",{controls:!0,width:"100%",height:"100%",children:[(0,d.jsx)("source",{src:t,type:"video/mp4"}),"Your browser does not support video files."]});case"audio":return(0,d.jsxs)("audio",{controls:!0,style:{width:"100%"},children:[(0,d.jsx)("source",{src:t,type:"audio/mpeg"}),"Your browser does not support audio files."]});case"image":return(0,d.jsx)("img",{src:t,alt:"\u05ea\u05de\u05d5\u05e0\u05d4",style:{width:"100%",height:"100%",objectFit:"contain"}});case"pdf":return(0,d.jsx)("iframe",{src:t,title:"PDF view",width:"100%",height:"100%",style:{border:"none"},onLoad:()=>p(!1),onError:()=>{p(!1),alert("Error in loading file")}});case"document":return(0,d.jsx)("iframe",{src:"https://view.officeapps.live.com/op/embed.aspx?src=".concat(encodeURIComponent(t)),title:"File view ",width:"100%",height:"100%",style:{border:"none"}});default:return(0,d.jsx)("iframe",{src:t,title:"File view",width:"100%",height:"100%",style:{border:"none"},onLoad:()=>p(!1),onError:()=>{p(!1),alert("Error in loading file")}})}})()]})})}}}]);
//# sourceMappingURL=742.0b6f404d.chunk.js.map