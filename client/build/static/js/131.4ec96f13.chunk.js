"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[131],{1131:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var r=s(5043),t=s(2018),l=(s(3760),s(9722)),n=s(9379),i=s(4315),d=s(828),o=s(1104),c=s(5797),u=s(5758),m=s(579);const g=e=>{const[a,s]=(0,r.useState)(null),l=["first grade","second grade","third grade","fourth grade","fifth grade","sixth grade","seventh grade","eighth grade"],[n,i]=(0,r.useState)(null),{updateGrade:d,visible:o,setVisible:g,grade:p}=e;(0,r.useRef)(""),(0,r.useRef)("");(0,r.useEffect)((()=>{p&&s(p.name)}),[p]);return(0,m.jsx)(c.l,{visible:o,modal:!0,header:"Update Grade",style:{width:"400px",borderRadius:"8px"},onHide:()=>g(!1),onClick:e=>e.stopPropagation(),children:(0,m.jsxs)("div",{className:"flex flex-column gap-4",style:{padding:"1rem"},children:[(0,m.jsxs)("div",{className:"flex flex-column gap-2",children:[(0,m.jsx)("label",{htmlFor:"name",className:"font-medium",children:"Name"}),(0,m.jsx)(u.j,{id:"name",value:a,suggestions:n,completeMethod:e=>{i(l)},dropdown:!0,onChange:e=>s(e.value),placeholder:"Select grade",className:"p-inputtext-sm"})]}),(0,m.jsxs)("div",{className:"flex justify-content-center gap-2",children:[(0,m.jsx)(t.$,{label:"Update",onClick:e=>{e.stopPropagation(),d(a),g(!1)},className:"p-button p-button-primary"}),(0,m.jsx)(t.$,{label:"Cancel",onClick:e=>{e.stopPropagation(),g(!1)},className:"p-button p-button-secondary"})]})]})})};var p=s(3003);const h=e=>{const[a,s]=(0,r.useState)(!1),c=(0,r.useRef)(null),{token:u}=(0,p.d4)((e=>e.token)),{user:h}=(0,p.d4)((e=>e.token)),x=(0,i.Zp)(),[f,v]=(0,r.useState)(!1),y=async a=>{try{const s=await l.A.delete("".concat("https://atsbooks.onrender.com/","api/grade/").concat(a),{headers:{Authorization:"Bearer ".concat(u)}});Array.isArray(s.data)&&(e.setGradesData(s.data),c.current&&c.current.show({severity:"success",summary:"Deleted successfuly",life:3e3}))}catch(t){var s,r;c.current.show({severity:"error",summary:"Error deleting",detail:(null===(s=t.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||t.message,life:4e3})}finally{v(!1)}},[b,j]=(0,r.useState)(null),[N,k]=(0,r.useState)(!1),w=(0,m.jsxs)("div",{className:"card flex flex-wrap gap-2 justify-content-center",children:["Admin"===(null===h||void 0===h?void 0:h.roles)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(t.$,{icon:"pi pi-times",label:"Delete",onClick:a=>{a.stopPropagation(),y(e.grade._id)}}),(0,m.jsx)(t.$,{label:"Update",icon:"pi pi-pencil",onClick:e=>{e.stopPropagation(),s(!0)}})]}),(0,m.jsx)(g,{updateGrade:async(a,s)=>{const r=(0,n.A)((0,n.A)({},e.grade),{},{name:a});try{const a=await l.A.put("".concat("https://atsbooks.onrender.com/","api/grade"),r,{headers:{Authorization:"Bearer ".concat(u)}});200===a.status&&(e.setGradesData(a.data),null!==c&&void 0!==c&&c.current&&c.current.show({severity:"success",summary:"Updated successfully",life:3e3}))}catch(t){409===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"This grade alredy exits",life:4e3}),400===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"Grade name is required",life:4e3}),console.error(t)}},setVisible:s,visible:a,grade:e.grade})]});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.y,{ref:c}),(0,m.jsx)(o.T,{}),(0,m.jsx)("div",{className:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2",children:(0,m.jsx)("div",{className:"p-4 border-1 surface-border surface-card border-round",onClick:()=>x("/books/".concat(e.grade._id)),style:{cursor:"pointer"},children:(0,m.jsxs)("div",{className:"flex flex-column align-items-center gap-3 py-5",children:[(0,m.jsx)("img",{className:"course-image",src:"/pictures/".concat(e.grade.name,".png "),alt:e.grade.name,footer:w}),(0,m.jsxs)("div",{className:"text-2xl font-bold",children:[e.grade.name," ",w]})]})})},e.grade._id)]})},x=e=>{const[a,s]=(0,r.useState)(null),l=["first grade","second grade","third grade","fourth grade","fifth grade","sixth grade","seventh grade","eighth grade"],[n,i]=(0,r.useState)(null),{createGrade:d,visibleCreatGrade:o}=e,g=(0,r.useRef)("");return(0,m.jsx)(c.l,{visible:o,modal:!0,onHide:()=>e.setVisibleCreatGrade(!1),style:{width:"25rem",borderRadius:"8px"},className:"custom-dialog",children:(0,m.jsxs)("div",{className:"flex flex-column gap-4 p-4",children:[(0,m.jsxs)("div",{className:"flex flex-column gap-2",children:[(0,m.jsx)("label",{className:"text-gray-700 font-medium",children:"Name"}),(0,m.jsx)(u.j,{value:a,suggestions:n,completeMethod:e=>{i(l)},virtualScrollerOptions:{itemSize:38},dropdown:!0,onChange:e=>s(e.value),className:"p-inputtext p-3 border border-gray-300 rounded-md w-full"})]}),(0,m.jsxs)("div",{className:"flex justify-content-between gap-3",children:[(0,m.jsx)(t.$,{label:"Create",onClick:s=>{d(a,g),e.setVisibleCreatGrade(!1)},className:"bg-indigo-500 text-white px-5 py-2 rounded-md hover:bg-indigo-600"}),(0,m.jsx)(t.$,{label:"Cancel",onClick:()=>e.setVisibleCreatGrade(!1),className:"bg-gray-500 text-white px-5 py-2 rounded-md hover:bg-gray-600"})]})]})})};var f=s(65);s(9906);const v=()=>{const{token:e}=(0,p.d4)((e=>e.token)),{user:a}=(0,p.d4)((e=>e.token)),[s,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=async()=>{try{const e=await l.A.get("".concat("https://atsbooks.onrender.com/","api/grade"));200===e.status&&n(e.data)}catch(e){console.error(e)}};(0,r.useEffect)((()=>{u()}),[]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.y,{ref:c}),"Admin"===(null===a||void 0===a?void 0:a.roles)&&(0,m.jsx)(t.$,{icon:"pi pi-plus",rounded:!0,"aria-label":"Filter",onClick:()=>o(!0),className:"add-button"}),(0,m.jsx)(x,{createGrade:async(a,s)=>{const r={name:a,image:s.current.value?s.current.value:" "};try{201===(await l.A.post("".concat("https://atsbooks.onrender.com/","api/grade"),r,{headers:{Authorization:"Bearer ".concat(e)}})).status&&u()}catch(t){409===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"This grade alredy exits",life:4e3}),400===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"Grade name is required",life:4e3}),console.error(t)}},setVisibleCreatGrade:o,visibleCreatGrade:i}),(0,m.jsx)("div",{className:"card",children:(0,m.jsx)(f.U$,{value:s,listTemplate:e=>(0,m.jsx)("div",{className:"grid grid-nogutter",children:e.map(((e,a)=>(e=>{if(e)return(0,m.jsx)(h,{grade:e,getGrades:u,setGradesData:n})})(e)))})})})]})}},9906:()=>{}}]);
//# sourceMappingURL=131.4ec96f13.chunk.js.map