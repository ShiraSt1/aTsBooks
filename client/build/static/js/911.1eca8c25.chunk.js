"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{9911:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});t(3760);var a=t(9722),s=t(5043),i=t(3907),c=t(5148),o=t(579);const n=e=>{let{name:r}=e;const t=r?r.charAt(0).toUpperCase():"",a=(e=>{const r=["#007ad9","#ff5722","#4caf50","#9c27b0","#e91e63","#ffc107","#673ab7"];return r[e.toLowerCase().charCodeAt(0)%r.length]})(r);return(0,o.jsxs)("div",{className:"flex align-items-center",children:[(0,o.jsx)(c.e,{label:t,size:"large",className:"mr-2",style:{backgroundColor:a,color:"white",borderRadius:"50%"}}),(0,o.jsx)("span",{className:"font-bold",children:r})]})};var l=t(3204),d=t(828),u=t(1104),m=t(1045),f=t(3003),h=t(3488);const g=()=>{(0,m.Zp)();const{token:e}=(0,f.d4)((e=>e.token)),{user:r}=(0,f.d4)((e=>e.token)),[t,c]=(0,s.useState)([]),[g,y]=(0,s.useState)([]),p=(0,s.useRef)(null),[x,b]=(0,s.useState)([]),[j,w]=(0,s.useState)([]),C=(0,h.z)().API_URL,_=async r=>{try{const t=await a.A.delete("".concat(C,"api/user/").concat(r),{headers:{Authorization:"Bearer ".concat(e)}});200===t.status&&(c((e=>e.filter((e=>e._id!==t.data._id)))),y((e=>e.filter((e=>e._id!==t.data._id)))),p.current.show({severity:"success",summary:"Success",detail:"User deleted",life:3e3}))}catch(t){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}},v=async r=>{try{const t=r;(await a.A.put("".concat(C,"api/user/confirm"),{_id:t},{headers:{Authorization:"Bearer ".concat(e)}})).status}catch(t){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}};return(0,s.useEffect)((()=>{(async()=>{try{const r=await a.A.get("".concat(C,"api/user"),{headers:{Authorization:"Bearer ".concat(e)}});if(200===r.status){const e=r.data.filter((e=>!0===e.confirm&&"Admin"!==e.roles)),t=r.data.filter((e=>!1===e.confirm&&"Admin"!==e.roles));c(t),y(e)}}catch(r){p.current.show({severity:"error",summary:"Error",detail:"Error loading users",life:3e3})}})()}),[]),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)(d.y,{ref:p}),(0,o.jsx)(u.T,{}),(0,o.jsx)(i.c,{dataKey:"_id",source:t,target:g,onChange:e=>{const r=e.target.filter((e=>!g.some((r=>r._id===e._id)))),a=e.source.filter((e=>!t.some((r=>r._id===e._id))));r.forEach((e=>v(e._id))),a.forEach((e=>v(e._id))),c(e.source),y(e.target),b([]),w([])},itemTemplate:e=>(0,o.jsxs)("div",{className:"flex flex-wrap p-2 align-items-center gap-3",children:[(0,o.jsx)(n,{name:e.name}),(0,o.jsx)("span",{className:"font-semibold",children:e.email}),(0,o.jsx)("span",{className:"font-semibold",children:e.phone}),(0,o.jsx)(l.RCe,{size:20,className:"delete-icon",onClick:()=>{return r=e._id,void(0,u.Z)({message:"Are you sure you want to delete this user?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",accept:()=>_(r),reject:()=>{p.current.show({severity:"info",summary:"Cancelled",detail:"Deletion canceled",life:3e3})}});var r}})]}),selection:x,onSelectionChange:e=>{b(e.sourceSelection),w(e.targetSelection)},filter:!0,filterBy:"name",breakpoint:"1280px",sourceHeader:"Not Confirmed",targetHeader:"Confirmed",sourceStyle:{height:"24rem"},targetStyle:{height:"24rem"},sourceFilterPlaceholder:"Search by name",targetFilterPlaceholder:"Search by name"})]})}}}]);
//# sourceMappingURL=911.1eca8c25.chunk.js.map