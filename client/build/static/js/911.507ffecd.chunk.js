"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{9911:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});r(3760);var a=r(9722),s=r(5043),i=r(3907),c=r(5148),l=r(579);const n=e=>{let{name:t}=e;const r=t?t.charAt(0).toUpperCase():"",a=(e=>{const t=["#007ad9","#ff5722","#4caf50","#9c27b0","#e91e63","#ffc107","#673ab7"];return t[e.toLowerCase().charCodeAt(0)%t.length]})(t);return(0,l.jsxs)("div",{className:"flex align-items-center",children:[(0,l.jsx)(c.e,{label:r,size:"large",className:"mr-2",style:{backgroundColor:a,color:"white",borderRadius:"50%"}}),(0,l.jsx)("span",{className:"font-bold",children:t})]})};var o=r(3204),d=r(828),u=r(1104),m=r(4315),h=r(3003);const f=()=>{(0,m.Zp)();const{token:e}=(0,h.d4)((e=>e.token)),{user:t}=(0,h.d4)((e=>e.token)),[r,c]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),p=(0,s.useRef)(null),[x,y]=(0,s.useState)([]),[j,b]=(0,s.useState)([]),v=async t=>{try{const r=await a.A.delete("".concat("http://localhost:3001/","api/user/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});200===r.status&&(c((e=>e.filter((e=>e._id!==r.data._id)))),g((e=>e.filter((e=>e._id!==r.data._id)))),p.current.show({severity:"success",summary:"Success",detail:"User deleted",life:3e3}))}catch(r){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}},w=async t=>{try{const r=t;(await a.A.put("".concat("http://localhost:3001/","api/user/confirm"),{_id:r},{headers:{Authorization:"Bearer ".concat(e)}})).status}catch(r){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}};return(0,s.useEffect)((()=>{(async()=>{try{const t=await a.A.get("".concat("http://localhost:3001/","api/user"),{headers:{Authorization:"Bearer ".concat(e)}});if(200===t.status){const e=t.data.filter((e=>!0===e.confirm&&"Admin"!==e.roles)),r=t.data.filter((e=>!1===e.confirm&&"Admin"!==e.roles));c(r),g(e)}}catch(t){p.current.show({severity:"error",summary:"Error",detail:"Error loading users",life:3e3})}})()}),[]),(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)(d.y,{ref:p}),(0,l.jsx)(u.T,{}),(0,l.jsx)(i.c,{dataKey:"_id",source:r,target:f,onChange:e=>{const t=e.target.filter((e=>!f.some((t=>t._id===e._id)))),a=e.source.filter((e=>!r.some((t=>t._id===e._id))));t.forEach((e=>w(e._id))),a.forEach((e=>w(e._id))),c(e.source),g(e.target),y([]),b([])},itemTemplate:e=>(0,l.jsxs)("div",{className:"flex flex-wrap p-2 align-items-center gap-3",children:[(0,l.jsx)(n,{name:e.name}),(0,l.jsx)("span",{className:"font-semibold",children:e.email}),(0,l.jsx)("div",{className:"flex-1 flex flex-column gap-2",children:(0,l.jsx)("div",{className:"flex align-items-center gap-2",children:(0,l.jsxs)("div",{className:"flex align-items-center gap-2",children:[(0,l.jsx)("br",{}),(0,l.jsx)("i",{className:"pi pi-calendar text-sm"}),(0,l.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})})}),(0,l.jsx)(o.RCe,{size:20,className:"delete-icon",onClick:()=>{return t=e._id,void(0,u.Z)({message:"Are you sure you want to delete this user?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",accept:()=>v(t),reject:()=>{p.current.show({severity:"info",summary:"Cancelled",detail:"Deletion canceled",life:3e3})}});var t}})]}),selection:x,onSelectionChange:e=>{y(e.sourceSelection),b(e.targetSelection)},filter:!0,filterBy:"name",breakpoint:"1280px",sourceHeader:"Not Confirmed",targetHeader:"Confirmed",sourceStyle:{height:"24rem"},targetStyle:{height:"24rem"},sourceFilterPlaceholder:"Search by name",targetFilterPlaceholder:"Search by name"})]})}}}]);
//# sourceMappingURL=911.507ffecd.chunk.js.map