"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[911],{9911:(e,r,t)=>{t.r(r),t.d(r,{default:()=>h});t(3760);var a=t(9722),s=t(5043),i=t(3907),c=t(5148),n=t(579);const o=e=>{let{name:r}=e;const t=r?r.charAt(0).toUpperCase():"",a=(e=>{const r=["#007ad9","#ff5722","#4caf50","#9c27b0","#e91e63","#ffc107","#673ab7"];return r[e.toLowerCase().charCodeAt(0)%r.length]})(r);return(0,n.jsxs)("div",{className:"flex align-items-center",children:[(0,n.jsx)(c.e,{label:t,size:"large",className:"mr-2",style:{backgroundColor:a,color:"white",borderRadius:"50%"}}),(0,n.jsx)("span",{className:"font-bold",children:r})]})};var l=t(3204),d=t(828),m=t(1104),u=t(4315),f=t(3003);const h=()=>{(0,u.Zp)();const{token:e}=(0,f.d4)((e=>e.token)),{user:r}=(0,f.d4)((e=>e.token)),[t,c]=(0,s.useState)([]),[h,g]=(0,s.useState)([]),p=(0,s.useRef)(null),[x,y]=(0,s.useState)([]),[j,b]=(0,s.useState)([]),v=async r=>{try{const t=await a.A.delete("".concat("https://atsbooks.onrender.com/","api/user/").concat(r),{headers:{Authorization:"Bearer ".concat(e)}});200===t.status&&(c((e=>e.filter((e=>e._id!==t.data._id)))),g((e=>e.filter((e=>e._id!==t.data._id)))),p.current.show({severity:"success",summary:"Success",detail:"User deleted",life:3e3}))}catch(t){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}},w=async r=>{try{const t=r;(await a.A.put("".concat("https://atsbooks.onrender.com/","api/user/confirm"),{_id:t},{headers:{Authorization:"Bearer ".concat(e)}})).status}catch(t){p.current.show({severity:"error",summary:"Error",detail:"Error loading/deleting/confirming user",life:3e3})}};return(0,s.useEffect)((()=>{(async()=>{try{const r=await a.A.get("".concat("https://atsbooks.onrender.com/","api/user"),{headers:{Authorization:"Bearer ".concat(e)}});if(200===r.status){const e=r.data.filter((e=>!0===e.confirm&&"Admin"!==e.roles)),t=r.data.filter((e=>!1===e.confirm&&"Admin"!==e.roles));c(t),g(e)}}catch(r){p.current.show({severity:"error",summary:"Error",detail:"Error loading users",life:3e3})}})()}),[]),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)(d.y,{ref:p}),(0,n.jsx)(m.T,{}),(0,n.jsx)(i.c,{dataKey:"_id",source:t,target:h,onChange:e=>{const r=e.target.filter((e=>!h.some((r=>r._id===e._id)))),a=e.source.filter((e=>!t.some((r=>r._id===e._id))));r.forEach((e=>w(e._id))),a.forEach((e=>w(e._id))),c(e.source),g(e.target),y([]),b([])},itemTemplate:e=>(0,n.jsxs)("div",{className:"flex flex-wrap p-2 align-items-center gap-3",children:[(0,n.jsx)(o,{name:e.name}),(0,n.jsx)("span",{className:"font-semibold",children:e.email}),(0,n.jsx)("div",{className:"flex-1 flex flex-column gap-2",children:(0,n.jsx)("div",{className:"flex align-items-center gap-2",children:(0,n.jsxs)("div",{className:"flex align-items-center gap-2",children:[(0,n.jsx)("br",{}),(0,n.jsx)("i",{className:"pi pi-calendar text-sm"}),(0,n.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})})}),(0,n.jsx)(l.RCe,{size:20,className:"delete-icon",onClick:()=>{return r=e._id,void(0,m.Z)({message:"Are you sure you want to delete this user?",header:"Delete Confirmation",icon:"pi pi-exclamation-triangle",acceptLabel:"Yes",rejectLabel:"No",accept:()=>v(r),reject:()=>{p.current.show({severity:"info",summary:"Cancelled",detail:"Deletion canceled",life:3e3})}});var r}})]}),selection:x,onSelectionChange:e=>{y(e.sourceSelection),b(e.targetSelection)},filter:!0,filterBy:"name",breakpoint:"1280px",sourceHeader:"Not Confirmed",targetHeader:"Confirmed",sourceStyle:{height:"24rem"},targetStyle:{height:"24rem"},sourceFilterPlaceholder:"Search by name",targetFilterPlaceholder:"Search by name"})]})}}}]);
//# sourceMappingURL=911.4ebb4d0e.chunk.js.map