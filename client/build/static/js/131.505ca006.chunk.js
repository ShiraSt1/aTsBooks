"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[131],{1131:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var r=s(5043),t=s(2018),l=(s(3760),s(9722)),i=s(9379),n=s(4315),o=s(828),d=s(1104),c=s(5797),u=s(5758),g=s(970),p=s(579);const m=e=>{const[a,s]=(0,r.useState)(null),l=["first grade","second grade","third grade","fourth grade","fifth grade","sixth grade","seventh grade","eighth grade"],[i,n]=(0,r.useState)(null),{updateGrade:d,visible:m,setVisible:h,grade:x}=e,f=((0,r.useRef)(""),(0,r.useRef)(""),(0,r.useRef)(null));(0,r.useEffect)((()=>{x&&s(x.name)}),[x]);return(0,p.jsxs)(c.l,{visible:m,modal:!0,header:"Update Grade",style:{width:"400px",borderRadius:"8px"},onHide:()=>h(!1),onClick:e=>e.stopPropagation(),children:[(0,p.jsx)(o.y,{ref:f}),(0,p.jsx)(g.r,{}),(0,p.jsxs)("div",{className:"flex flex-column gap-4",style:{padding:"1rem"},children:[(0,p.jsxs)("div",{className:"flex flex-column gap-2",children:[(0,p.jsx)("label",{htmlFor:"name",className:"font-medium",children:"Name"}),(0,p.jsx)(u.j,{id:"name",value:a,suggestions:i,completeMethod:e=>{n(l)},dropdown:!0,onChange:e=>s(e.value),placeholder:"Select grade",className:"p-inputtext-sm"})]}),(0,p.jsxs)("div",{className:"flex justify-content-center gap-2",children:[(0,p.jsx)(t.$,{label:"Update",onClick:e=>{e.stopPropagation(),d(a),h(!1)},className:"p-button p-button-primary"}),(0,p.jsx)(t.$,{label:"Cancel",onClick:e=>{e.stopPropagation(),h(!1)},className:"p-button p-button-secondary"})]})]})]})};var h=s(3003);const x=e=>{const[a,s]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=(0,r.useRef)(null),{token:x}=(0,h.d4)((e=>e.token)),{user:f}=(0,h.d4)((e=>e.token)),v=(0,n.Zp)(),[y,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),k=(0,p.jsxs)("div",{className:"card flex flex-wrap gap-2 justify-content-center",children:["Admin"===(null===f||void 0===f?void 0:f.roles)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t.$,{icon:"pi pi-times",label:"Delete",onClick:a=>{a.stopPropagation(),(0,g.P)({target:a.currentTarget,message:"Are you sure you want to delete the grade and all the files in it?",icon:"pi pi-exclamation-triangle",defaultFocus:"accept",accept:()=>{a.stopPropagation(),(async s=>{try{const a=await l.A.delete("".concat("http://localhost:3001/","api/grade/").concat(s),{headers:{Authorization:"Bearer ".concat(x)}});Array.isArray(a.data)&&(e.setGradesData(a.data),c.current&&c.current.show({severity:"success",summary:"Deleted successfuly",life:3e3}))}catch(a){var r,t;c.current.show({severity:"error",summary:"Error deleting",detail:(null===(r=a.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||a.message,life:4e3})}finally{j(!1)}})(e.grade._id),s(!1)},reject:()=>{a.stopPropagation(),s(!1)}})}}),(0,p.jsx)(t.$,{label:"Update",icon:"pi pi-pencil",onClick:e=>{e.stopPropagation(),s(!0)}})]}),(0,p.jsx)(m,{updateGrade:async(a,s)=>{const r=(0,i.A)((0,i.A)({},e.grade),{},{name:a});try{const a=await l.A.put("".concat("http://localhost:3001/","api/grade"),r,{headers:{Authorization:"Bearer ".concat(x)}});200===a.status&&(e.setGradesData(a.data),null!==c&&void 0!==c&&c.current&&c.current.show({severity:"success",summary:"Updated successfully",life:3e3}))}catch(t){409===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"This grade alredy exits",life:4e3}),400===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"Grade name is required",life:4e3}),console.error(t)}},setVisible:s,visible:a,grade:e.grade})]});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.y,{ref:c}),(0,p.jsx)(d.T,{}),(0,p.jsx)(o.y,{ref:u}),(0,p.jsx)(g.r,{}),(0,p.jsx)("div",{className:"col-12 sm:col-6 lg:col-12 xl:col-4 p-2",children:(0,p.jsxs)("div",{className:"p-4 border-1 surface-border surface-card border-round",onClick:a=>{a.stopPropagation(),v("/books/".concat(e.grade._id))},style:{cursor:"pointer"},children:[(0,p.jsxs)("div",{className:"flex flex-column align-items-center gap-3 py-5",children:[(0,p.jsx)("img",{className:"course-image",src:"/pictures/".concat(e.grade.name,".png"),alt:e.grade.name}),(0,p.jsx)("div",{className:"text-2xl font-bold",children:e.grade.name})]}),k]})},e.grade._id)]})},f=e=>{const[a,s]=(0,r.useState)(null),l=["first grade","second grade","third grade","fourth grade","fifth grade","sixth grade","seventh grade","eighth grade"],[i,n]=(0,r.useState)(null),{createGrade:o,visibleCreatGrade:d}=e,g=(0,r.useRef)("");return(0,p.jsx)(c.l,{visible:d,modal:!0,onHide:()=>e.setVisibleCreatGrade(!1),style:{width:"25rem",borderRadius:"8px"},className:"custom-dialog",children:(0,p.jsxs)("div",{className:"flex flex-column gap-4 p-4",children:[(0,p.jsxs)("div",{className:"flex flex-column gap-2",children:[(0,p.jsx)("label",{className:"text-gray-700 font-medium",children:"Name"}),(0,p.jsx)(u.j,{value:a,suggestions:i,completeMethod:e=>{n(l)},virtualScrollerOptions:{itemSize:38},dropdown:!0,onChange:e=>s(e.value),className:"p-inputtext p-3 border border-gray-300 rounded-md w-full"})]}),(0,p.jsxs)("div",{className:"flex justify-content-between gap-3",children:[(0,p.jsx)(t.$,{label:"Create",onClick:s=>{o(a,g),e.setVisibleCreatGrade(!1)},className:"bg-indigo-500 text-white px-5 py-2 rounded-md hover:bg-indigo-600"}),(0,p.jsx)(t.$,{label:"Cancel",onClick:()=>e.setVisibleCreatGrade(!1),className:"bg-gray-500 text-white px-5 py-2 rounded-md hover:bg-gray-600"})]})]})})};var v=s(65);s(9906);const y=()=>{const{token:e}=(0,h.d4)((e=>e.token)),{user:a}=(0,h.d4)((e=>e.token)),[s,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=async()=>{try{const e=await l.A.get("".concat("http://localhost:3001/","api/grade"));200===e.status&&i(e.data)}catch(e){console.error(e)}};(0,r.useEffect)((()=>{u()}),[]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.y,{ref:c}),"Admin"===(null===a||void 0===a?void 0:a.roles)&&(0,p.jsx)(t.$,{icon:"pi pi-plus",rounded:!0,"aria-label":"Filter",onClick:()=>d(!0),className:"add-button"}),(0,p.jsx)(f,{createGrade:async(a,s)=>{const r={name:a,image:s.current.value?s.current.value:" "};try{201===(await l.A.post("".concat("http://localhost:3001/","api/grade"),r,{headers:{Authorization:"Bearer ".concat(e)}})).status&&u()}catch(t){409===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"This grade alredy exits",life:4e3}),400===t.status&&null!==c&&void 0!==c&&c.current&&c.current.show({severity:"error",summary:"Grade name is required",life:4e3}),console.error(t)}},setVisibleCreatGrade:d,visibleCreatGrade:n}),(0,p.jsx)("div",{className:"card",children:(0,p.jsx)(v.U$,{value:s,listTemplate:e=>(0,p.jsx)("div",{className:"grid grid-nogutter",children:e.map(((e,a)=>(e=>{if(e)return(0,p.jsx)(x,{grade:e,getGrades:u,setGradesData:i})})(e)))})})})]})}},9906:()=>{}}]);
//# sourceMappingURL=131.505ca006.chunk.js.map