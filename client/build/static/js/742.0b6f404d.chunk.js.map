{"version":3,"file":"static/js/742.0b6f404d.chunk.js","mappings":"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","sources":["Components/FileView.jsx"],"sourcesContent":["import { useParams } from 'react-router-dom';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\n\r\nconst FileView = () => {\r\n  const { fileId } = useParams();\r\n  const [fileUrl, setFileUrl] = useState('');\r\n  const [fileType, setFileType] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const { token } = useSelector((state) => state.token);\r\n  const { user } = useSelector((state) => state.token);\r\n\r\n  useEffect(() => {\r\n    if (fileId)\r\n      fetchFile()\r\n  }, [fileId]);\r\n\r\n  const fetchFile = async () => {\r\n    try {\r\n      // קריאת שרת עם headers\r\n      const response = await axios.get(`${process.env.REACT_APP_API_URL}api/file/view/${fileId}`, {\r\n        headers: { 'Authorization': `Bearer ${token}` }, // הוספת הטוקן ב-Headers\r\n        responseType: 'blob', // טיפוס blob עבור קבצים\r\n      });\r\n      // יצירת URL זמני מה-blob\r\n      const url = URL.createObjectURL(response.data);\r\n      setFileUrl(url);\r\n      setLoading(false);\r\n      const extension = fileId.split('.').pop().toLowerCase();\r\n      if (['mp4', 'webm'].includes(extension)) setFileType('video');\r\n      else if (['mp3', 'wav', 'ogg'].includes(extension)) setFileType('audio');\r\n      else if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg'].includes(extension)) setFileType('image');\r\n      else if (['pdf'].includes(extension)) setFileType('pdf');\r\n      else if (['txt', 'doc', 'docx'].includes(extension)) setFileType('document');\r\n      else setFileType('iframe');\r\n    }\r\n    catch (err) {\r\n      console.error(\"Error in loading file\", err);\r\n      alert(\"Error in loading file\");\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  const renderFile = () => {\r\n    switch (fileType) {\r\n      case 'video':\r\n        return (\r\n          <video controls width=\"100%\" height=\"100%\">\r\n            <source src={fileUrl} type=\"video/mp4\" />\r\n            Your browser does not support video files.\r\n          </video>\r\n        );\r\n      case 'audio':\r\n        return (\r\n          <audio controls style={{ width: '100%' }}>\r\n            <source src={fileUrl} type=\"audio/mpeg\" />\r\n            Your browser does not support audio files.\r\n          </audio>\r\n        );\r\n      case 'image':\r\n        return <img src={fileUrl} alt=\"תמונה\" style={{ width: '100%', height: '100%', objectFit: 'contain' }} />;\r\n      case 'pdf':\r\n        return (\r\n          <iframe\r\n            src={fileUrl}\r\n            title= \"PDF view\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            style={{ border: 'none' }}\r\n            onLoad={() => setLoading(false)}\r\n            onError={() => {\r\n              setLoading(false);\r\n              alert(\"Error in loading file\");\r\n            }}\r\n          />\r\n        );\r\n      case 'document':\r\n        return (\r\n          <iframe\r\n            src={`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(fileUrl)}`}\r\n            title=\"File view \"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            style={{ border: 'none' }}\r\n          />\r\n        );\r\n      default:\r\n        return (\r\n          <iframe\r\n            src={fileUrl}\r\n            title=\"File view\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            style={{ border: 'none' }}\r\n            onLoad={() => setLoading(false)}\r\n            onError={() => {\r\n              setLoading(false);\r\n              alert(\"Error in loading file\");\r\n            }}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '2rem', display: 'flex', justifyContent: 'center' }}>\r\n      <div\r\n        style={{\r\n          border: '1px solid #ccc',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 2px 5px rgba(0, 0, 0, 0.05)',\r\n          width: '100%',\r\n          maxWidth: '1000px',\r\n          height: '80vh',\r\n          overflow: 'hidden',\r\n          backgroundColor: '#f9f9f9',\r\n          position: 'relative',\r\n        }}\r\n      >\r\n        {loading && (\r\n          <div style={{\r\n            position: 'absolute', top: 0, left: 0, width: '100%', height: '100%',\r\n            backgroundColor: '#f9f9f9',\r\n            display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n            zIndex: 10\r\n          }}>\r\n            Loading file...\r\n          </div>\r\n        )}\r\n        {renderFile()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default FileView;\r\n\r\n"],"names":["FileView","fileId","useParams","fileUrl","setFileUrl","useState","fileType","setFileType","loading","setLoading","token","useSelector","state","user","useEffect","fetchFile","async","response","axios","get","concat","process","headers","responseType","url","URL","createObjectURL","data","extension","split","pop","toLowerCase","includes","err","console","error","alert","_jsx","style","padding","display","justifyContent","children","_jsxs","border","borderRadius","boxShadow","width","maxWidth","height","overflow","backgroundColor","position","top","left","alignItems","zIndex","renderFile","controls","src","type","alt","objectFit","title","onLoad","onError","encodeURIComponent"],"sourceRoot":""}