{"version":3,"file":"static/js/981.bb8d64a2.chunk.js","mappings":"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","sources":["Components/BookCreat.jsx","Components/BookUpdate.jsx","Components/Books.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport axios from 'axios';\r\nimport { useParams } from 'react-router-dom';\r\nimport { FileUpload } from 'primereact/fileupload';\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst BookCreate = (props) => {\r\n    const { createBook, visibleCreatBook, setVisibleCreatBook } = props;\r\n    const { token } = useSelector((state) => state.token);\r\n    const [name, setName] = useState(\"\"); // שינוי ל-State עבור שם הספר\r\n    const [selectedGrades, setSelectedGrades] = useState([]);\r\n    const [grades, setGrades] = useState([]);\r\n    const [nameError, setNameError] = useState(false);\r\n    const [imageError, setImageError] = useState(false);\r\n    const [selectedimage, setSelectedImage] = useState(null);\r\n    const [preview, setPreview] = useState(null);\r\n    const { gradeId } = useParams();\r\n\r\n    const AvailablGrade = async () => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/grade`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            if (res.status === 204) {\r\n                setGrades([]);\r\n            } else {\r\n                const gradeOptions = res.data.map((grade) => ({\r\n                    label: grade.name,\r\n                    value: grade.name,\r\n                    id: grade._id,\r\n                }));\r\n                setGrades(gradeOptions);\r\n                if (gradeId) {\r\n                    const selectedGrade = gradeOptions.find((grade) => grade.id === gradeId);\r\n                    if (selectedGrade) {\r\n                        setSelectedGrades([selectedGrade.value]);\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching grades:', error);\r\n            setGrades([]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        AvailablGrade();\r\n    }, [gradeId]);\r\n\r\n    const handleCreateClick = () => {\r\n        createBook(name, selectedGrades, selectedimage);\r\n        setVisibleCreatBook(false);\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            visible={visibleCreatBook}\r\n            modal\r\n            header=\"Create Book\"\r\n            style={{ width: '400px', borderRadius: '8px' }}\r\n            onHide={() => setVisibleCreatBook(false)}\r\n        >\r\n            <div className=\"flex flex-column gap-4\" style={{ padding: '1rem' }}>\r\n                <div className=\"inline-flex flex-column gap-2\">\r\n                    <label htmlFor=\"name\" className=\"font-medium\">Name</label>\r\n                    <InputText\r\n                        id=\"name\"\r\n                        className={`p-inputtext-sm ${nameError ? 'p-invalid' : ''}`}\r\n                        type=\"text\"\r\n                        value={name} \r\n                        onChange={(e) => setName(e.target.value)} \r\n                        placeholder=\"Enter book name\"\r\n                    />\r\n                    {nameError && (\r\n                        <small className=\"p-error\">This field is required.</small>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"inline-flex flex-column gap-2\">\r\n                    <label htmlFor=\"grades\" className=\"font-medium\">Grades</label>\r\n                    <MultiSelect\r\n                        id=\"grades\"\r\n                        value={selectedGrades}\r\n                        options={grades}\r\n                        onChange={(e) => setSelectedGrades(e.value)}\r\n                        optionLabel=\"label\"\r\n                        placeholder=\"Select Grades\"\r\n                        display=\"chip\"\r\n                        className=\"p-multiselect-sm\"\r\n                        virtualScrollerOptions={{ itemSize: 38 }}\r\n                    />\r\n                </div>\r\n\r\n                {/* שדה תמונה לפי כתובת URL */}\r\n                <div className=\"inline-flex flex-column gap-2\">\r\n                    <label htmlFor=\"image\" className=\"font-medium\">Upload Image</label>\r\n                    <FileUpload\r\n                        name=\"image\"\r\n                        customUpload\r\n                        accept=\"image/*\"\r\n                        maxFileSize={5 * 1024 * 1024}\r\n                        uploadHandler={(e) => {\r\n                            const file = e.files[0];\r\n                            if (file) {\r\n                                setSelectedImage(file);\r\n                                setPreview(URL.createObjectURL(file));\r\n                            }\r\n                        }}\r\n                        // emptyTemplate={<p>Drag an image file or click to select.</p>}\r\n                        chooseLabel=\"Choose\"\r\n                        // uploadLabel=\"Confirm\"\r\n                        // cancelLabel=\"Cancel\"\r\n                    />\r\n                    {preview && <img src={preview} alt=\"Preview\" style={{ width: 150, marginTop: 10 }} />}\r\n                </div>\r\n\r\n                <div className=\"flex justify-content-center gap-2\">\r\n                    <Button\r\n                        label=\"Create\"\r\n                        onClick={() => {\r\n                            handleCreateClick(); // קריאה לפונקציה הקיימת\r\n                            setSelectedImage(null); \r\n                            setPreview(null); // איפוס preview\r\n                            setName(null);\r\n                        }}\r\n                        className=\"p-button p-button-primary\"\r\n                    />\r\n                    <Button\r\n                        label=\"Cancel\"\r\n                        onClick={() => {\r\n                            setVisibleCreatBook(false);\r\n                            setSelectedImage(null);\r\n                            setPreview(null);\r\n                            setName(null);\r\n                        }}\r\n                        className=\"p-button p-button-secondary\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default BookCreate;","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport axios from 'axios';\r\nimport { FileUpload } from \"primereact/fileupload\";\r\n\r\nconst BookUpdate = (props) => {\r\n    const { updateBook, visible, book = {}, setVisible } = props; // ברירת מחדל ל-book\r\n    const [selectedImage, setSelectedImage] = useState(null); // תמונה שנבחרה\r\n    const [preview, setPreview] = useState(book?.image ? `${process.env.REACT_APP_API_URL}${book.image}` : \"\");\r\n    const [grades, setGrades] = useState([]);\r\n    const [selectedGrades, setSelectedGrades] = useState([]);\r\n    const nameRef = useRef(\"\");\r\n    const [name, setName] = useState(book?.name || \"\");\r\n\r\n    // הבאת כיתות זמינות\r\n    const AvailablGrade = async () => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/grade`);\r\n            if (res.status === 204) {\r\n                setGrades([]);\r\n            } else {\r\n                const gradeOptions = res.data.map((grade) => ({\r\n                    label: grade.name,\r\n                    value: grade.name,\r\n                }));\r\n                setGrades(gradeOptions);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching grades:', error);\r\n            setGrades([]);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        AvailablGrade();\r\n    }, []);\r\n\r\n    // הגדרת כיתות ראשוניות\r\n    useEffect(() => {\r\n        if (book?.grades && book.grades.length > 0) {\r\n            const initialGrades = book.grades.map((grade) => grade.name);\r\n            setSelectedGrades(initialGrades);\r\n        }\r\n    }, [book, grades]);\r\n\r\n    useEffect(() => {\r\n        if (book?.image) {\r\n            setPreview(`${process.env.REACT_APP_API_URL}${book.image}`);\r\n        }\r\n    }, [book.image]);\r\n    \r\n    // העלאת תמונה חדשה\r\n    const handleImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        // const file = e.files[0];\r\n        if (file) {\r\n            setSelectedImage(file);\r\n            setPreview(URL.createObjectURL(file)); // עדכון תצוגה מקדימה\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            visible={visible}\r\n            modal\r\n            header=\"Update Book\"\r\n            style={{ width: '400px', borderRadius: '8px' }}\r\n            onHide={() => {\r\n                setSelectedImage(null);\r\n                setPreview(book.image || \"\");\r\n                setVisible(false);\r\n            }}\r\n        >\r\n            <div className=\"flex flex-column gap-4\" style={{ padding: '1rem' }}>\r\n                {/* שם הספר */}\r\n                <div className=\"flex flex-column gap-2\">\r\n                    <label htmlFor=\"name\" className=\"font-medium\">Name</label>\r\n                    <InputText\r\n                        id=\"name\"\r\n                        placeholder=\"Enter book name\"\r\n                        className=\"p-inputtext-sm\"\r\n                        onChange={(e) => {setName(e.target.value)  }} \r\n                        defaultValue={book?.name || \"\"}\r\n                    />\r\n                </div>\r\n\r\n                {/* כיתות */}\r\n                <div className=\"flex flex-column gap-2\">\r\n                    <label htmlFor=\"grades\" className=\"font-medium\">Grades</label>\r\n                    <MultiSelect\r\n                        id=\"grades\"\r\n                        value={selectedGrades}\r\n                        options={grades}\r\n                        onChange={(e) => setSelectedGrades(e.value)}\r\n                        optionLabel=\"label\"\r\n                        placeholder=\"Select Grades\"\r\n                        display=\"chip\"\r\n                        className=\"w-full md:w-20rem custom-multiselect\"\r\n                    />\r\n                </div>\r\n\r\n                {/* העלאת תמונה */}\r\n                <div className=\"flex flex-column gap-2\">\r\n                    <label htmlFor=\"image\" className=\"font-medium\">Upload New Image</label>\r\n                    <FileUpload\r\n                        name=\"image\"\r\n                        customUpload\r\n                        accept=\"image/*\"\r\n                        maxFileSize={5 * 1024 * 1024}\r\n                        uploadHandler={handleImageUpload}\r\n                        // emptyTemplate={<p>Drag an image file or click to select.</p>}\r\n                    />\r\n                    {preview && <img src={preview} alt=\"Preview\" style={{ width: 150, marginTop: 10 }} />}\r\n                </div>\r\n\r\n                {/* כפתורים */}\r\n                <div className=\"flex justify-content-center gap-2\">\r\n                    <Button\r\n                        label=\"Update\"\r\n                        onClick={() => {\r\n                            setName(nameRef.current.value || book.name)\r\n\r\n                            const imageToSend = selectedImage || book.image; // אם אין תמונה חדשה, שולחים את הקיימת\r\n                            updateBook(name, selectedGrades, imageToSend, book);\r\n                            setVisible(false);\r\n                        }}\r\n                        className=\"p-button p-button-primary\"\r\n                    />\r\n                    <Button\r\n                        label=\"Cancel\"\r\n                        onClick={() => {\r\n                            setSelectedImage(null);\r\n                            setPreview(book.image || \"\");\r\n                            setVisible(false);\r\n                        }}\r\n                        className=\"p-button p-button-secondary\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default BookUpdate;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Button } from 'primereact/button';\r\nimport { DataView } from 'primereact/dataview';\r\nimport axios from 'axios';\r\nimport BookCreate from \"./BookCreat\";\r\nimport BookUpdate from './BookUpdate';\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams } from 'react-router-dom';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../Styles/Grades.css';\r\nimport { ProgressSpinner } from 'primereact/progressspinner';\r\nimport { Toast } from 'primereact/toast';\r\nimport { confirmPopup, ConfirmPopup } from 'primereact/confirmpopup';\r\n\r\nexport default function BooksDataView() {\r\n    const [books, setBooks] = useState([]);\r\n    const [layout, setLayout] = useState('grid');\r\n    const [selectedBook, setSelectedBook] = useState({});\r\n    const [flagGradeId, setFlagGradeId] = useState(false);\r\n    const [gradeName, setGradeName] = useState('');\r\n    const [visibleCreatBook, setVisibleCreatBook] = useState(false);\r\n    const [visible, setVisible] = useState(false);\r\n    const { gradeId } = useParams();\r\n    const { token } = useSelector((state) => state.token);\r\n    const { user } = useSelector((state) => state.token);\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n    const toastDelete = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (gradeId) {\r\n            getGradeName(gradeId);\r\n            getBooksByGrade(gradeId); // Fetch books for the specific grade\r\n        } else {\r\n            getBooks();\r\n            setGradeName(''); // Fetch all books if no gradeId is provided\r\n        }\r\n    }, [gradeId, flagGradeId]);\r\n\r\n    const getGradeName = async (Id) => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/grade/${Id}`); // נתיב לשרת לקבלת שם כיתה\r\n            if (res.status === 200) {\r\n                setGradeName(res.data.name); // עדכון שם הכיתה ב-state\r\n            }\r\n        } catch (e) {\r\n            console.error('Error fetching grade name:', e);\r\n            setGradeName(''); // במידה ויש שגיאה, איפוס שם הכיתה\r\n        }\r\n    };\r\n\r\n    const getBooks = async () => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/book`);\r\n            if (res.status === 200) {\r\n                setBooks(res.data);\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n    };\r\n\r\n    const getBooksByGrade = async (Id) => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/book/grade/${Id}`\r\n            );\r\n            if (res.status === 200) {\r\n                setBooks(res.data);\r\n            }\r\n        } catch (e) {\r\n            if (e.status === 400) {\r\n                alert(\"there are no book for this grade\")\r\n            }\r\n        }\r\n    };\r\n\r\n    const deleteBook = async (bookId) => {\r\n        setLoading(true)\r\n        try {\r\n            const res = await axios.delete(`${process.env.REACT_APP_API_URL}api/book/${bookId}`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            setFlagGradeId(!flagGradeId)\r\n        } catch (err) {\r\n            console.error('Error deleting book:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const updateBook = async (name, selectedItem, image, book) => {\r\n        setLoading(true)\r\n\r\n        const updatebook = {\r\n            ...book,\r\n            name: name ? name : book.name,\r\n            grades: selectedItem,\r\n            image: image ? image : book.image,\r\n        };\r\n        try {\r\n            const res = await axios.put(`${process.env.REACT_APP_API_URL}api/book`, updatebook, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            if (res.status === 200) {\r\n                setFlagGradeId(!flagGradeId)\r\n            }\r\n        } catch (e) {\r\n\r\n            console.error(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const createBook = async (name, selectedItem, image) => {\r\n        setLoading(true)\r\n        if (!image)\r\n            alert(\"confirm the image\")\r\n        const formData = new FormData();\r\n        formData.append('name', name);\r\n        formData.append('grades', JSON.stringify(selectedItem));\r\n        formData.append('image', image);\r\n\r\n        try {\r\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}api/book`, formData, {\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data' // הגדרת התוכן כ-multipart\r\n                },\r\n            });\r\n            if (res.status === 200 || res.status === 201) {\r\n                if (gradeId) {\r\n                    getBooksByGrade(gradeId);\r\n                } else {\r\n                    getBooks();\r\n                }\r\n            }\r\n        } catch (e) {\r\n            alert(e.res.data.mes)\r\n            if (e.status === 400)\r\n                console.error(\"Error creating book:\", e);\r\n            if (e.status === 402)\r\n                alert(\"this book name alrady exits\")\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleNavigation = (id) => {\r\n        if (!token) {\r\n            alert('You are not allowed to view the book files.')\r\n        }\r\n        else {\r\n            navigate(`/titles/${id}`);\r\n            // אם המשתמש אינו מורשה, מפעיל פונקציה להצגת דיאלוג\r\n        }\r\n    };\r\n\r\n    const gridItem = (book) => (\r\n        <div className=\"col-12 sm:col-6 lg:col-4 xl:col-4 p-2\" key={book._id}>\r\n            <div\r\n                // className=\"p-4 border-1 surface-border surface-card border-round flex flex-column justify-content-between\"\r\n                className=\"p-4 border-1 surface-border surface-card border-round\"\r\n                onClick={() => handleNavigation(book._id)}\r\n                style={{ cursor: 'pointer', height: \"700px\" }}>\r\n                <div\r\n                    style={{ height: \"550px\" }}\r\n                    className=\"flex flex-column align-items-center gap-3 py-5\">\r\n                    <img\r\n                        className=\"object-cover w-full h-full\"\r\n                        src={`${process.env.REACT_APP_API_URL}${book.image}`}\r\n                        alt={book.name}\r\n                        style={{ objectFit: 'cover' }}\r\n                    />\r\n                    <div className=\"text-2xl font-bold\">{book.name}</div>\r\n                    {book.grades && book.grades.length > 0 && (\r\n                        <>\r\n                            <strong>Suitable for:</strong>\r\n                            <ul className=\"m-0 pl-3 list-disc text-xs\">\r\n                                {book.grades.map((grade, idx) => (\r\n                                    <li key={idx}>{grade.name}</li>\r\n                                ))}\r\n                            </ul>\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div\r\n                    style={{ marginTop: 'auto', display: 'flex', flexDirection: 'column',paddingBottom:'0px',marginBottom:'0px' }}\r\n                    className=\"card flex flex-wrap gap-2 justify-content-center\">\r\n                    {user?.roles === \"Admin\" && (\r\n                        <>\r\n                            <Button\r\n                                icon=\"pi pi-pencil\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    setVisible(true);\r\n                                    setSelectedBook(book);\r\n                                }}\r\n                                tooltip=\"Edit\"\r\n                            />\r\n                            <Button\r\n                                icon=\"pi pi-trash\"\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    confirmPopup({\r\n                                        target: e.currentTarget,\r\n                                        message: 'Are you sure you want to delete this book and all the files in it?',\r\n                                        icon: 'pi pi-exclamation-triangle',\r\n                                        defaultFocus: 'accept',\r\n                                        accept: () => {\r\n                                            e.stopPropagation()\r\n                                            deleteBook(book._id);\r\n                                            setVisible(false);\r\n                                        },\r\n                                        reject: () => {\r\n                                            e.stopPropagation()\r\n                                            setVisible(false);\r\n                                        }\r\n                                    });\r\n                                }}\r\n                                tooltip=\"Delete\"\r\n                            />\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    const itemTemplate = (book, layout, index) => {\r\n        if (!book) return;\r\n        return layout === 'list' ? gridItem(book) : gridItem(book);\r\n    };\r\n\r\n    const listTemplate = (books, layout) => (\r\n        <div className=\"grid grid-nogutter\">\r\n            {books.map((book, index) => itemTemplate(book, layout, index))}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <Toast ref={toastDelete} />\r\n            <ConfirmPopup />\r\n            {loading && (\r\n                <div style={{ margin: \"20px\" }}>\r\n                    <ProgressSpinner style={{ width: '30px', height: '30px' }} strokeWidth=\"5\" />\r\n                    <p>Wait just a moment please...</p>\r\n                </div>\r\n            )}\r\n            <div>\r\n                {gradeName && (\r\n                    <h1 className=\"grade-header\">{gradeName}</h1> // שם הכיתה בראש\r\n                )}\r\n            </div>\r\n            {user?.roles === \"Admin\" && (\r\n                <Button icon=\"pi pi-plus\" rounded aria-label=\"Filter\" onClick={() => setVisibleCreatBook(true)} className=\"add-button\" />)}\r\n            <BookCreate createBook={createBook} setVisibleCreatBook={setVisibleCreatBook} visibleCreatBook={visibleCreatBook} />\r\n            <div className=\"card\">\r\n                <DataView value={Array.isArray(books) ? books : []} listTemplate={listTemplate} layout={layout} />\r\n            </div>\r\n            {selectedBook ? <BookUpdate updateBook={updateBook} setVisible={setVisible} visible={visible} book={selectedBook} /> : <></>}\r\n\r\n        </div>\r\n    );\r\n}"],"names":["props","createBook","visibleCreatBook","setVisibleCreatBook","token","useSelector","state","name","setName","useState","selectedGrades","setSelectedGrades","grades","setGrades","nameError","setNameError","imageError","setImageError","selectedimage","setSelectedImage","preview","setPreview","gradeId","useParams","useEffect","async","res","axios","get","concat","process","headers","status","gradeOptions","data","map","grade","label","value","id","_id","selectedGrade","find","error","console","AvailablGrade","_jsx","Dialog","visible","modal","header","style","width","borderRadius","onHide","children","_jsxs","className","padding","htmlFor","InputText","type","onChange","e","target","placeholder","MultiSelect","options","optionLabel","display","virtualScrollerOptions","itemSize","FileUpload","customUpload","accept","maxFileSize","uploadHandler","file","files","URL","createObjectURL","chooseLabel","src","alt","marginTop","Button","onClick","updateBook","book","setVisible","selectedImage","image","nameRef","useRef","length","initialGrades","defaultValue","current","imageToSend","BooksDataView","books","setBooks","layout","setLayout","selectedBook","setSelectedBook","flagGradeId","setFlagGradeId","gradeName","setGradeName","user","loading","setLoading","navigate","useNavigate","toastDelete","getGradeName","getBooksByGrade","getBooks","Id","alert","gridItem","handleNavigation","cursor","height","objectFit","_Fragment","idx","flexDirection","paddingBottom","marginBottom","roles","icon","stopPropagation","tooltip","confirmPopup","currentTarget","message","defaultFocus","delete","bookId","err","deleteBook","reject","Toast","ref","ConfirmPopup","margin","ProgressSpinner","strokeWidth","rounded","BookCreate","selectedItem","formData","FormData","append","JSON","stringify","post","mes","DataView","Array","isArray","listTemplate","index","itemTemplate","BookUpdate","updatebook","_objectSpread","put"],"sourceRoot":""}