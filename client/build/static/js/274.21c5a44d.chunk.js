"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[274],{9274:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var t=a(5043),l=a(8055),n=a(9722),o=a(4315),i=a(3003),r=a(2545),c=a(4376),d=a(3740),u=a(579);const p=()=>{const[e,s]=(0,t.useState)(""),[a,p]=(0,t.useState)(""),[h,g]=(0,t.useState)(""),[m,w]=(0,t.useState)(!1),[x,j]=(0,t.useState)(""),[v,b]=(0,t.useState)(""),[N,f]=(0,t.useState)(""),[y,k]=(0,t.useState)(""),S=(0,i.wA)(),{token:C}=(0,i.d4)((e=>e.token)),[P,F]=(0,t.useState)(!1),[A,T]=(0,t.useState)(""),[Y,V]=(0,t.useState)(!1),q=(0,o.Zp)(),E=e=>{e?e.length<6?k("Password must be at least 6 characters long."):/[A-Z]/.test(e)?/[a-z]/.test(e)?/[0-9]/.test(e)?k(""):k("Password must contain at least one digit."):k("Password must contain at least one lowercase letter."):k("Password must contain at least one uppercase letter."):k("Password is required.")};return(0,u.jsxs)("div",{className:"login-page-container",children:[Y&&(0,u.jsxs)("div",{className:"loading-container",children:[(0,u.jsx)(d.p,{style:{width:"30px",height:"30px"}}),(0,u.jsx)("p",{children:"Your request is being processed..."})]}),(0,u.jsx)("h2",{className:"login-title",children:"Log in to ATS-books"}),m?P?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"verification-code",className:"login-label",children:"Verification Code"}),(0,u.jsx)(l.S,{id:"verification-code",value:A,onChange:e=>T(e.target.value),type:"text",className:"login-input"})]}),(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"new-password",className:"login-label",children:"New Password"}),(0,u.jsx)(r._,{inputId:"new-password",value:x,onChange:e=>j(e.target.value),toggleMask:!0,className:"login-input"})]}),(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"confirm-password",className:"login-label",children:"Confirm Password"}),(0,u.jsx)(r._,{inputId:"confirm-password",value:v,onChange:e=>b(e.target.value),toggleMask:!0,className:"login-input"})]}),(0,u.jsx)("button",{onClick:async()=>{if(E(x),x===v)try{const s=await n.A.post("".concat("http://localhost:3001/","api/user/reset-password-with-code"),{email:e,verificationCode:A,newPassword:x});s&&200===s.status&&(S((0,c.WG)({token:s.data.accessToken,user:s.data.user})),q("/"),f("Password has been reset successfully. You can now log in."),w(!1),F(!1))}catch(s){g("Failed to reset password. Please check the verification code and try again.")}else g("Passwords do not match.")},className:"login-button",children:"Reset Password"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,u.jsx)(l.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,u.jsx)("button",{onClick:async()=>{try{const s=await n.A.post("".concat("http://localhost:3001/","api/user/send-verification-code"),{email:e});s&&200===s.status&&(alert("A verification code will be sent to your email."),F(!0),f("Verification code sent to your email."))}catch(s){g("Failed to send verification code. Please try again.")}},className:"login-button",children:"Send Verification Code"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,u.jsx)(l.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,u.jsxs)("div",{className:"login-input-wrapper",children:[(0,u.jsx)("label",{htmlFor:"password",className:"login-label",children:"Password"}),(0,u.jsx)(l.S,{id:"password",value:a,onChange:e=>p(e.target.value),type:"password",className:"login-input"})]}),(0,u.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),w(!0)},className:"btn-secondary forgot-password-link",children:"Forgot Password?"}),(0,u.jsx)("button",{onClick:async()=>{if(V(!0),e&&a)try{const s=await n.A.post("".concat("http://localhost:3001/","api/user/login"),{email:e,password:a});s&&200===s.status&&(S((0,c.WG)({token:s.data.accessToken,user:s.data.user})),q("/"))}catch(s){s.response&&401===s.response.status?g("You are not connected- There is a problem with the data you entered."):s.response&&403===s.response.status?g("Your account has not been confirmed yet."):g("An error occurred, please try again.")}finally{V(!1)}else g("Please fill in both email and password.")},className:"login-button",children:"Login"})]}),h&&(0,u.jsx)("div",{className:"error-message",children:h}),N&&(0,u.jsx)("div",{className:"success-message",children:N})]})}}}]);
//# sourceMappingURL=274.21c5a44d.chunk.js.map