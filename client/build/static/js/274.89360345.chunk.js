"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[274],{9274:(e,s,a)=>{a.r(s),a.d(s,{default:()=>u});var t=a(5043),n=a(8055),o=a(9722),l=a(4315),i=a(3003),r=a(2545),c=a(4376),d=a(579);const u=()=>{const[e,s]=(0,t.useState)(""),[a,u]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[h,g]=(0,t.useState)(!1),[w,x]=(0,t.useState)(""),[b,v]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),[f,k]=(0,t.useState)(""),y=(0,l.Zp)(),S=(0,i.wA)(),{token:C}=(0,i.d4)((e=>e.token)),[P,F]=(0,t.useState)(!1),[A,T]=(0,t.useState)(""),V=e=>{e?e.length<6?k("Password must be at least 6 characters long."):/[A-Z]/.test(e)?/[a-z]/.test(e)?/[0-9]/.test(e)?k(""):k("Password must contain at least one digit."):k("Password must contain at least one lowercase letter."):k("Password must contain at least one uppercase letter."):k("Password is required.")};return(0,d.jsxs)("div",{className:"login-page-container",children:[(0,d.jsx)("h2",{className:"login-title",children:"Sign in to ATS-books"}),h?P?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"verification-code",className:"login-label",children:"Verification Code"}),(0,d.jsx)(n.S,{id:"verification-code",value:A,onChange:e=>T(e.target.value),type:"text",className:"login-input"})]}),(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"new-password",className:"login-label",children:"New Password"}),(0,d.jsx)(r._,{inputId:"new-password",value:w,onChange:e=>x(e.target.value),toggleMask:!0,className:"login-input"})]}),(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"confirm-password",className:"login-label",children:"Confirm Password"}),(0,d.jsx)(r._,{inputId:"confirm-password",value:b,onChange:e=>v(e.target.value),toggleMask:!0,className:"login-input"})]}),(0,d.jsx)("button",{onClick:async()=>{if(V(w),w===b)try{const s=await o.A.post("".concat("https://atsbooks.onrender.com/","api/user/reset-password-with-code"),{email:e,verificationCode:A,newPassword:w});s&&200===s.status&&(S((0,c.WG)({token:s.data.accessToken,user:s.data.user})),y("../"),N("Password has been reset successfully. You can now log in."),g(!1),F(!1))}catch(s){m("Failed to reset password. Please check the verification code and try again.")}else m("Passwords do not match.")},className:"login-button",children:"Reset Password"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,d.jsx)(n.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,d.jsx)("button",{onClick:async()=>{try{const s=await o.A.post("".concat("https://atsbooks.onrender.com/","api/user/send-verification-code"),{email:e});s&&200===s.status&&(alert("A verification code will be sent to your email."),F(!0),N("Verification code sent to your email."))}catch(s){m("Failed to send verification code. Please try again.")}},className:"login-button",children:"Send Verification Code"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"email",className:"login-label",children:"Email address"}),(0,d.jsx)(n.S,{id:"email",value:e,onChange:e=>s(e.target.value),type:"text",className:"login-input"})]}),(0,d.jsxs)("div",{className:"login-input-wrapper",children:[(0,d.jsx)("label",{htmlFor:"password",className:"login-label",children:"Password"}),(0,d.jsx)(n.S,{id:"password",value:a,onChange:e=>u(e.target.value),type:"password",className:"login-input"})]}),(0,d.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),g(!0)},className:"btn-secondary forgot-password-link",children:"Forgot Password?"}),(0,d.jsx)("button",{onClick:async()=>{if(e&&a)try{const s=await o.A.post("".concat("https://atsbooks.onrender.com/","api/user/login"),{email:e,password:a});s&&200===s.status&&(S((0,c.WG)({token:s.data.accessToken,user:s.data.user})),y("../"))}catch(s){s.response&&401===s.response.status?m("You are not connect- There is a problem with the data you entered."):s.response&&403===s.response.status?m("Your account has not been confirmed yet."):m("An error occurred, please try again.")}else m("Please fill in both email and password.")},className:"login-button",children:"Login"})]}),p&&(0,d.jsx)("div",{className:"error-message",children:p}),j&&(0,d.jsx)("div",{className:"success-message",children:j})]})}}}]);
//# sourceMappingURL=274.89360345.chunk.js.map