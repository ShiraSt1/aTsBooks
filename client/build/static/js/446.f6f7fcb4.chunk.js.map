{"version":3,"file":"static/js/446.f6f7fcb4.chunk.js","mappings":"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","sources":["Components/Titles.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { PanelMenu } from 'primereact/panelmenu';\r\nimport { Button } from 'primereact/button';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { FileUpload } from 'primereact/fileupload';\r\nimport { Toast } from 'primereact/toast';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst Titles = () => {\r\n    const [items, setItems] = useState([]);\r\n    const [visibleUpload, setVisibleUpload] = useState(false);\r\n    const [uploadTitleId, setUploadTitleId] = useState(null);\r\n    const [newFileName, setNewFileName] = useState('');\r\n    const [selectedFile, setSelectedFile] = useState(null);\r\n    const [filesByTitle, setFilesByTitle] = useState({});\r\n    const [book, setBook] = useState(null);\r\n    const { token } = useSelector((state) => state.token);\r\n    const { user } = useSelector((state) => state.token);\r\n    const toast = useRef(null);\r\n    const { bookId } = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    const fetchBook = async () => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/book/${bookId}`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            setBook(res.data);\r\n        } catch (err) {\r\n            if (err.status === 400)\r\n                toast?.current.show({ severity: 'error', summary: 'Error', detail: 'No book found', life: 3000 });\r\n            console.error(\"error loading book:\", err);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchBook();\r\n        fetchTitles();\r\n    }, []);\r\n\r\n    const fetchTitles = async () => {\r\n        try {\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}api/title/getTitlesByBook/${bookId}`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            const titles = res.data;\r\n            const filesMap = {};\r\n            for (const title of titles) {\r\n                const filesRes = await axios.get(`${process.env.REACT_APP_API_URL}api/file/title/${title._id}`, {\r\n                    headers: { 'Authorization': `Bearer ${token}` }\r\n                });\r\n\r\n                filesMap[title._id] = filesRes.data;\r\n            }\r\n            setFilesByTitle(filesMap);\r\n            const panelItems = titles.map(title => ({\r\n                label: (\r\n                    <div className=\"flex justify-between align-items-center w-full\">\r\n                        <span>{title.name}</span>\r\n                        {user?.roles === \"Admin\" && (<>\r\n                            <Button icon=\"pi pi-plus\" rounded text size=\"small\" onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                setUploadTitleId(title._id);\r\n                                setVisibleUpload(true);\r\n                            }} /></>)}\r\n                    </div>\r\n                ),\r\n                items: (filesMap[title._id] || []).map(file => ({\r\n                    label: (\r\n                        <div className=\"flex justify-between align-items-center w-full gap-2\">\r\n                            <span\r\n                                style={{\r\n                                    maxWidth: '30%', // חצי מהרוחב של השורה\r\n                                    overflow: 'hidden',\r\n                                    textOverflow: 'ellipsis',\r\n                                    whiteSpace: 'nowrap'\r\n                                }}\r\n                                title={file.name} // מציג את השם המלא כ-tooltip על מעבר עכבר\r\n                            >\r\n                                {file.name}\r\n                            </span>\r\n                            <span className=\"flex gap-2\">\r\n                                <Button icon=\"pi pi-eye\" rounded text size=\"small\" onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    navigate(`/fileview/${file._id}`);\r\n                                }} />\r\n                                <Button icon=\"pi pi-download\" rounded text size=\"small\" onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    window.open(`${process.env.REACT_APP_API_URL}api/file/download/${file._id}?name=${file.customName || file.name}`, '_blank'\r\n                                    );\r\n                                }} />\r\n                                {user?.roles === \"Admin\" && (<>\r\n                                    {/* <Button icon=\"pi pi-pencil\" rounded text size=\"small\" onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        handleEdit({ id: file._id, name: file.customName || file.name, titleId: title._id });\r\n                                    }} /> */}\r\n                                    <Button icon=\"pi pi-trash\" rounded text size=\"small\" severity=\"danger\" onClick={(e) => {\r\n                                        e.stopPropagation();\r\n                                        handleDelete(file._id, title._id);\r\n                                    }} /></>)}\r\n                            </span>\r\n                        </div>\r\n                    )\r\n                }))\r\n            }));\r\n            setItems(panelItems);\r\n        } catch (err) {\r\n            console.error(err);\r\n            toast.current?.show({ severity: 'error', summary: 'Error', detail: 'Error loading', life: 3000 });\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (fileId, titleId) => {\r\n        try {\r\n            await axios.delete(`${process.env.REACT_APP_API_URL}api/file/${fileId}`, {\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            });\r\n            setFilesByTitle(prev => ({\r\n                ...prev,\r\n                [titleId]: prev[titleId].filter(f => f._id !== fileId)\r\n            }));\r\n            fetchTitles();\r\n            toast.current?.show({ severity: 'success', summary: 'Deleted', detail: 'File deleted successfuly', life: 2000 });\r\n        } catch (err) {\r\n            console.error(err);\r\n            toast.current?.show({ severity: 'error', summary: 'Error', detail: 'Error deleting', life: 3000 });\r\n        }\r\n    };\r\n\r\n    const handleUpload = async ({ files }) => {\r\n        \r\n        const file = files[0];\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n        formData.append('title', uploadTitleId);\r\n        formData.append('customName', newFileName); // שליחת שם מותאם אישית\r\n\r\n        try {\r\n            await axios.post(`${process.env.REACT_APP_API_URL}api/file`, formData, {\r\n                headers: { 'Content-Type': 'multipart/form-data', 'Authorization': `Bearer ${token}` }\r\n            });\r\n            fetchTitles();\r\n            setVisibleUpload(false);\r\n            setNewFileName('');\r\n\r\n            toast.current?.show({ severity: 'success', summary: 'Uploaded', detail: 'File uploaded successfuly', life: 2000 });\r\n        } catch (err) {\r\n            console.error(err);\r\n            toast.current?.show({ severity: 'error', summary: 'Error', detail: 'Upload failed', life: 3000 });\r\n        }\r\n    };\r\n\r\n    const [filePreview, setFilePreview] = useState(''); // תצוגה מקדימה של שם הקובץ הנבחר\r\n\r\n    return (\r\n        <div className=\"p-4\">\r\n            {book && (\r\n                <h2 className=\"text-center mb-4\">{book.name}</h2>\r\n            )}\r\n            <div className=\"flex flex-column md:flex-row gap-4\">\r\n                {/* תמונת הספר בצד שמאל */}\r\n                {book?.image && (\r\n                    <div className=\"flex justify-content-center md:w-4\">\r\n                        <img\r\n                            src={`${process.env.REACT_APP_API_URL}${book.image}`}\r\n                            alt=\"Book\"\r\n                            className=\"border-round shadow-2\"\r\n                            style={{ maxWidth: '100%', maxHeight: '500px', objectFit: 'contain' }}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {/* כותרות בצד ימין */}\r\n                <div className=\"flex-grow-1\">\r\n\r\n                    <PanelMenu model={items} className=\"w-full md:w-30rem\" />\r\n                </div>\r\n            </div>\r\n            <Dialog\r\n                header=\"Upload new file\"\r\n                visible={visibleUpload}\r\n                onHide={() => {\r\n                    setVisibleUpload(false);\r\n                    setSelectedFile(null); // איפוס הקובץ הנבחר אם החלון נסגר\r\n                    setFilePreview(''); // איפוס תצוגת שם הקובץ\r\n                }}\r\n                style={{ width: '30rem', borderRadius: '8px', textAlign: 'center' }}\r\n                className=\"custom-upload-dialog\"\r\n            >\r\n                <div className=\"flex flex-column gap-4\" style={{ padding: '1.5rem' }}>\r\n                    <label htmlFor=\"fileName\" className=\"font-medium\" style={{ textAlign: 'left' }}>\r\n                        File name\r\n                    </label>\r\n                    <InputText\r\n                        id=\"fileName\"\r\n                        placeholder=\"Enter file name\"\r\n                        value={newFileName}\r\n                        onChange={(e) => setNewFileName(e.target.value)}\r\n                        className=\"p-inputtext-lg\"\r\n                        style={{ borderRadius: '6px', width: '100%' }}\r\n                    />\r\n                    <FileUpload\r\n                        mode=\"basic\"\r\n                        auto={false} // ביטול העלאה אוטומטית\r\n                        customUpload\r\n                        // uploadHandler={handleUpload}\r\n                        chooseLabel=\"Choose file\"\r\n                        uploadHandler={({ files }) => {\r\n                            setSelectedFile(files[0]); // שמירת הקובץ הנבחר ב-state זמני\r\n                            setFilePreview(files[0]?.name || ''); // הצגת שם הקובץ הנבחר\r\n                        }}\r\n                        className=\"p-button-primary\"\r\n                        style={{ width: '100%' }}\r\n\r\n                    />\r\n                    {filePreview && (\r\n                        <div style={{ textAlign: 'left', fontSize: '0.9rem', color: '#555' }}>\r\n                            <strong>Selected file:</strong> {filePreview}\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex justify-content-center gap-3\">\r\n                        <Button\r\n                            label=\"Upload\"\r\n                            onClick={() => {\r\n                                if (selectedFile) {\r\n                                    handleUpload({ files: [selectedFile] }); // קריאה ל-handleUpload עם הקובץ הנבחר\r\n                                } else {\r\n                                    toast.current?.show({ severity: 'warn', summary: 'Error', detail: 'Press upload below', life: 3000 });\r\n                                }\r\n                            }}\r\n                            className=\"p-button-primary\"\r\n                            style={{ width: '40%' }}\r\n                        />\r\n                        <Button\r\n                            label=\"Cancel\"\r\n                            onClick={() => {\r\n                                setVisibleUpload(false);\r\n                                setSelectedFile(null); // איפוס הקובץ הנבחר\r\n                                setFilePreview(''); // איפוס שם הקובץ\r\n                            }}\r\n                            className=\"p-button-secondary\"\r\n                            style={{ width: '40%' }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n            <Toast ref={toast} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Titles;"],"names":["Titles","items","setItems","useState","visibleUpload","setVisibleUpload","uploadTitleId","setUploadTitleId","newFileName","setNewFileName","selectedFile","setSelectedFile","filesByTitle","setFilesByTitle","book","setBook","token","useSelector","state","user","toast","useRef","bookId","useParams","navigate","useNavigate","useEffect","async","res","axios","get","concat","process","headers","data","err","status","current","show","severity","summary","detail","life","console","error","fetchBook","fetchTitles","titles","filesMap","title","filesRes","_id","panelItems","map","label","_jsxs","className","children","_jsx","name","roles","_Fragment","Button","icon","rounded","text","size","onClick","e","stopPropagation","file","style","maxWidth","overflow","textOverflow","whiteSpace","window","open","customName","handleDelete","_toast$current","fileId","titleId","_toast$current2","delete","prev","_objectSpread","filter","f","_toast$current3","filePreview","setFilePreview","image","src","alt","maxHeight","objectFit","PanelMenu","model","Dialog","header","visible","onHide","width","borderRadius","textAlign","padding","htmlFor","InputText","id","placeholder","value","onChange","target","FileUpload","mode","auto","customUpload","chooseLabel","uploadHandler","_ref2","_files$","files","fontSize","color","_toast$current6","_ref","formData","FormData","append","_toast$current4","post","_toast$current5","handleUpload","Toast","ref"],"sourceRoot":""}